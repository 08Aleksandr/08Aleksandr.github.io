/*
 Плагин для маскированного ввода jQuery
 Авторское право (c) 2007 - 2015 Джош Буш (digitalbush.com)
 Лицензировано в соответствии с лицензией MIT (http://digitalbush.com/projects/masked-input-plugin/#license)
 Версия: 1.4.1
*/
!функция(а){"функции"==typeof на определение&&определить.АМД?определить(["jQuery с"],В):а("объект"==typeof на экспорт?требуют("библиотека jQuery"):библиотеки jQuery)}(функция(а){ВАР б,с=навигатор.Ашераденс,Д=/для iPhone/я.тест(гр),е=/хром/я.тест(гр),Ф=/андроид/я.тест(гр);а.маска={определений:{9:"[0-9]",а:"[а-Яа-я]","*":"[а-Яа-З0-9]"},autoclear:!0,имяданных:"rawMaskFn",заполнитель:"_"},a.fn.extend({каретка:функция(a,b){var c;if(0!==this.длина&&!это.это("скрытый"))возвращает"число"==typeof на себя?(б="число"==typeof на б?Б:а,это.каждая(функция(){это.setSelectionRange?это.setSelectionRange(А,Б):в этом.createTextRange&&(С=в этом.createTextRange(),с.коллапс(!0),гр.moveEnd("персонаж",Б),Ц.moveStart("персонаж",в),ц.Выберите())})):(это[0].setSelectionRange?(а=это[0].объект selectionstart,б=это[0].selectionEnd):документ.выбор&&документе.выбор.createRange&&(с=документе.выбор.createRange(),а=0-ц.дубликаты().moveStart("характер",-1e5),Б=В+С.текст.длина),{начинаться:а,окончание:б})},демаскировать:функция(){вернуть это.триггер("маску")},маска:функция(с,г){ВАР ч,я,Дж,К,Л,М,Н,О;если(!С&&в этом.длина>0){ч=а(это[0]);ВАР п=ч.сведения(а.маска.dataName);вернуться п?п():пустота 0}вернуть г=а.расширить({autoclear:есть.маска.autoclear,заполнитель:есть.маска.заполнитель,завершено:нуль},г),я=а.маска.определения,Дж=[],K и=Н=с.длина,л=нуль,один.друг(Си.сплит(""),функция(а,б){"?"==б?(Н--,К=А):я[б]?(Дж.нажимаем(новое регулярное выражение(Я[б])),нуль===я&&(л=Дж.длина-1),К>а&&(м=Дж.длина-1)):Дж.нажимаем(нуль)}),это.триггер("личину").каждая(функция(){функция Н(){Если(г.завершены){для(ВАР а=л;м>=а;а++), если(Дж[А]&&С[а]===р(а))возвращение;г.завершено.звоните(Б)}}функция р(а){возвращение г.заполнитель.используя метод charat(а<г.заполнитель.длина?а:0)}функция г(а){для(;++С<Н&&!j[a];);возвращает функцию a} r(a){для(;-a>=>0&&!j[a];);возвращает функцию a} s(a,b){var c,d;если(!(0>>a)){для(c=a,d=q(b);n>>c;c++)если(j[c]){если(!(н>д&&J и[с].тест(гр[д])))перерыв;с[С]=С[Д],С[Д]=П(Д),д=д(д)}з(),б.каре(математика.Макс(л,а))}}функция т(а){ВАР Б,С,Д,Е;для(Б=В,С=П(С);Н>Б;Б++), если(J в[б]){если(Д=Г(Б),Е=С[Б],с[б]=с,!(н>д&&J И[Д].тест(е)))перерыв;с=е}}функция у(){ВАР а=б.вал(),б=б.каре();если(о'&&о'.длина&&о'.длина>а.длина){для(С(!0);б.начало>>0&&!j[b.begin-1];)b.begin--;если(0== =b.begin)для(;b.begin<l&&!j[b.начало];)b.начало++;B.каретка(b.начало,b.начало)}еще{для(A(!0);b.начните<n&&!Дж[б.начать];)б.начнем++;Б.каре(б.начнем,б.начнем)}ч()}функция В(){А(),Б.функция val()!=Е&&Б.изменение()}функция ж(С){если(!Б.опора("только чтение")){ВАР Б,С,Е,Ф=а.что||а.ключ;о=б.вал(),8===Ф||46===ф||г&&127===Ф?(б=б.каре(),с=б.начнем,е=б.конец,Е-С===0&&(с=46!==Ф?Р(С):Е=М(с-1),е=46===Ф?м(е):е),г(С,Е),С(С,Е-1),а.метод preventDefault()):13===ф?в.звоните(этот,в):27===Ф&&(Б.вал(Е),Б.вставки(0,а()),а.метод preventDefault())}}функция х(б){если(!B.prop("только для чтения")){var c,d,e,g=b.который||b.Кодключа,i=B.каретка();если(!(б.ctrlKey||б.altKey||б.metaKey||32>г)&&г&&13!==г){если(я.конец-мне.начинаем!==0&&(г(я.начать,я.конец),с(я.начать,я.конец-1)),Ц=Г(я.начинаться-1),Н>С&&(Д=строки.fromCharCode(г),J и[с].тест(г))){если(т(ц),ц[ц]=Д,з(),е=м(с),е){ВАР к=функция(){это.доверенности(на.ФН.каре,б,е)()};методы setTimeout(к,0)}Еще б.каре(е);я.начать<=м&&ч()}б.метод preventDefault()}}}функция г(а,б){ВАР с;для(С=С;Б>С&&Н>С;с++)Дж[Ц]&&(С[С]=Р(С))}функция З(){Б.вал(с.присоединиться(""))}функция а(а){ВАР Б,С,Д,Е=Б.вал(),Ф=-1;для(б=0,Д=0;н>б;б++), если(J в[Б]){Для(с[б]=р(б);Д++<Е.длина;)Если(С=Е.используя метод charat(Д-1),j в[б].тест(гр)){С[Б]=с,ф=б;сломать}если(Г>Е.длина){г(Б+1,п);перерыв}}еще с[б]===е.используя метод charat(д)&&д++,к>б&&(ф=б);вернуться в себя?З():К>Ф+1?г.autoclear||с.присоединиться("")===Д?(Б.вал()&&Б.вал(""),г(0,н)):з():(з(),б.вал(Б.вал().подстрока(0,Ф+1))),к?б:л}ВАР Б=в(этом),С=а.карте(Си.сплит(""),функция(а,б){возвращение"?"!=а?я[а]?П(Б):а:в void 0}),д=ц.присоединиться(""),Е=Б.вал();Б.сведения(а.маска.dataName,функция(){вернуть это.карте(с,функция(а,б){возвращение Дж[б]&&с!=п(б)?А:нуль}).присоединиться("")}),Б.один("сорвать маску",функция(){Б.выкл.(".маски").Удаленныеданные (.маска.имяданных)}).on("фокус.маска",функция(){если(!Б.опора("только чтение")){clearTimeout(б);ВАР А;Е=Б.вал(),а=А(),Б=метод setTimeout(функция(){Б.получить(0)===документе.activeElement&&(з(),а==с.заменить("?","").длина?Б.вставки(0,в):Б.каре(а))},10)}}).на("размытие.Маска",в).на("клавиша вниз.маска",ж).на("нажатие клавиши.маска",х).на("входной сигнал.маска-паста.маска",функция(){Б.опора("только для чтения")||метод setTimeout(функция(){ВАР а=а(!0);B.каретка(a),h()},0)}),e&&f&&B.выключено("вход. маска").включено("вход.маска",u),A()}}}})}));
